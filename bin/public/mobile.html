<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge">

  <meta name="author" content="HERSON MELO <hersonpc@gmail.com>">

  <title>MONITORAMENTO ONLINE DE ENFERMAGEM</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <link rel="shortcut icon" href="/enfermagem/favicon.ico" />
  <link rel="stylesheet" href="css/main.css">
  <link rel="manifest" href="manifest.json">

  <link rel="apple-touch-icon" href="images/icons/icon-72x72.png">
  <link rel="apple-touch-icon" sizes="152x152" href="images/icons/icon-152x152.png">
  <link rel="apple-touch-icon" sizes="192x192" href="images/icons/icon-192x192.png">
  <link rel="apple-touch-icon" sizes="512x512" href="images/icons/icon-512x512.png">
</head>
<body class="noselect">
    <!-- class="noselect" -->
  <div id="app">

    <div class="container-app" v-if="!mobile_resumido">
        <div class="header text-center">
            Gerenciamento Tático Hospitalar
            <span class="sub-header">Scores de Enfermagem</span>
        </div>
        <div class="infobar">{{ dataRef }}</div>
        <div class="main-content">
            <div class="box-setores" v-for="(itens, unidadeInternacao, idx) in results" v-if="idx == showIndice"> <!--  v-if="idx == showIndice" -->
                <div class="box-setores-title">
                  <i class="fas fa-chevron-left cursor-pointer altera-index alinha-a-esquerda" @click.stop="prevPage()"></i>
                  {{ unidadeInternacao }}
                  <i class="fas fa-chevron-right cursor-pointer altera-index alinha-a-direita" @click.stop="nextPage()"></i>
                </div>

                <div class="box-setores-content">
                    <div class="leito" :class="leitoStyle(item)" v-for="item in itens">
                        <div class="leito-title"><i class="fas fa-2x fa-bed"></i><br><br> {{ item.DS_LEITO }}</div>
                        <div class="leito-content">

                          <slot v-if="(item.STATUS == 1)">
                            VAGO
                          </slot>

                          <slot v-if="(item.STATUS == 2) && (item.TP_OCUPACAO == 'R')">
                            RESERVADO<br><br>SISTEMA DE REGULAÇÃO
                          </slot>

                          <slot v-if="(item.STATUS == 3) && (item.TP_OCUPACAO == 'C')">
                            ISOLAMENTO PRECAUÇÃO
                          </slot>

                          <slot v-if="(item.STATUS == 3) && (item.TP_OCUPACAO == 'M')">
                            LEITO EM MANUTENÇÃO
                          </slot>

                          <slot v-if="(item.STATUS == 2) && (item.TP_OCUPACAO != 'R')">
                            <label>Neste leito:</label>
                            <detail>{{ item.TEMPO_ULT_MOV }} <small>dias</small></detail>
                            <label>Internado:</label>
                            <detail>{{ item.TEMPO_INTERNACAO }} <small>dias</small></detail>

                            <slot v-for="(scoresObj, scoreName) in item.SCORES">
                                <label>{{ scoreName }}:</label>
                                <detail>{{ getScore(scoreName, item) }}</detail>
                            </slot>  
                          </slot>

                          <slot v-if="(item.STATUS == 3) && (item.TP_OCUPACAO != 'M') && (item.TP_OCUPACAO != 'C')">
                            INTERDITADO
                          </slot>

                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="container-app" v-if="mobile_resumido">
        <div class="header text-center">
            <div class="top-header" v-if="empresa_sigla == 'hdt'" @click.stop="empresa_sigla = 'ceapsol';navMobile()"><strong>{{ empresa_sigla }}</strong><br> Hospital Estadual de Doenças Tropicais</div>
            <div class="top-header" v-if="empresa_sigla == 'ceapsol'" @click.stop="empresa_sigla = 'hdt';navMobile()"><strong>{{ empresa_sigla }}</strong><br> Centro Estadual de Atenção Prolongada e Casa de Apoio Condomínio Solidariedade</div>
             Gerenciamento Tático Hospitalar
            <span class="sub-header">Scores de Enfermagem</span>
        </div>
        <div class="infobar">{{ dataRef }}</div>
        <div class="main-content" v-if="loading">
          <br><br><br><br><br>
          <h1 class="text-center">Buscando dados...</h1>
        </div>
        <div class="main-content" v-if="!loading">

            <div class="box-setores" v-for="(itens, unidadeInternacao, idx) in results"> <!--  v-if="idx == showIndice" -->
              <div class="box-setores-title sticky">
                <!-- <i class="fas fa-chevron-left cursor-pointer altera-index alinha-a-esquerda" @click.stop="prevPage()"></i> -->
                {{ unidadeInternacao }}
                <!-- <i class="fas fa-chevron-right cursor-pointer altera-index alinha-a-direita" @click.stop="nextPage()"></i> -->
              </div>


              <div class="box-leitos-mini">
                  <div class="leito-mini" :class="leitoStyle(item)" v-for="item in itens" @click.stop="info(item)">
                    <div class="leito-title">
                      <i class="fas fa-2x fa-bed"></i>
                      <br> {{ item.DS_LEITO }}
                    </div>
                  </div>
                </div>

            </div>

        </div>
      </div>
    </div>


    <!-- <div class="grid-container" v-else>
        <div class="content">
          <div class="box-grupo-setores-internacao" v-for="(itens, unidadeInternacao, idx) in results" v-if="idx == showIndice">
              <div class="box-setor-internacao">
                  <div class="box-setor-internacao-titulo sub-colunas">
                    <div class="flex-1">
                      {{ unidadeInternacao }}
                    </div>
                    <div class="flex-1 text-center">
                      <i class="fas fa-chevron-circle-left cursor-pointer" @click.stop="prevPage()"></i>
                      SETOR
                      <i class="fas fa-chevron-circle-right cursor-pointer" @click.stop="nextPage()"></i>
                    </div>
                    <div class="flex-1 align-end box-setor-internacao-titulo-computed">
                      Média Perm. <span class="pill">{{ calcPermanencia(itens) }} dias </span>
                      TX. Ocupação <span class="pill">{{ calcOcupacao(itens) }}%</span>
                    </div>
                  </div>
                  <div class="box-setor-internacao-body">
                      <div class="leito" :class="leitoStyle(item)" v-for="item in itens">
                        <div class="leito-titulo"><i class="fas fa-bed"></i> {{ item.DS_LEITO }}</div>
                        <div class="leito-conteudo">
                            
                            <slot v-if="(item.STATUS == 1)">
                                VAGO
                            </slot>

                            <slot v-if="(item.STATUS == 2)">
                                <div class="pair-info" id="NESTE_LEITO">
                                    <span class="pair-key">Neste leito:</span>
                                    <span class="pair-value">{{ item.TEMPO_ULT_MOV }} <small>dias</small></span>
                                  </div>  
                                  <div class="pair-info">
                                    <span class="pair-key">Internado:</span>
                                    <span class="pair-value">{{ item.TEMPO_INTERNACAO }} <small>dias</small></span>
                                  </div>  
                                
                                  <div class="pair-info" v-for="(scoresObj, scoreName) in item.SCORES" :id="scoreName">
                                      <span class="pair-key">{{ scoreName }}:</span>
                                      <span class="pair-value">{{ getScore(scoreName, item) }}</span>
                                  </div>  
                            </slot>

                            <slot v-if="(item.STATUS == 3)">
                              INTERDITADO
                            </slot>
            
                          </div>
                    </div>
                  </div>
              </div>
          </div>
        </div>
        <div class="footbar">
            <div class="text-small">Fonte: Sistema MV, dados atualizados em {{ dataUpdate }}</div>
        </div>
    </div> -->
  </div>

  <script src="js/vue.js"></script>
  <script src="js/axios.js"></script>
  <script src="js/sweetalert2.js"></script>
  <script src="js/app.js"></script>
</body>
</html>
